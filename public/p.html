<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
		/>
		<script src="/scram/scramjet.all.js"></script>
		<script src="baremux/index.js" defer></script>
		<script src="epoxy/index.js" defer></script>
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="p.js" defer></script>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap");

			* { box-sizing: border-box; }

			body {
				font-family: "Roboto", Arial, Helvetica, sans-serif;
				margin: 0;
				background: linear-gradient(135deg, #0f0f0f 0%, #1a1a2e 100%);
				display: flex;
				flex-direction: column;
				min-height: 100vh;
				position: relative;
				overflow-x: hidden;
			}

			body::before {
				content: '';
				position: fixed;
				top: -50%;
				left: -50%;
				width: 200%;
				height: 200%;
				background: radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%);
				animation: pulse 15s ease-in-out infinite;
				pointer-events: none;
				z-index: 0;
			}

			@keyframes pulse {
				0%, 100% { transform: translate(0, 0) scale(1); }
				50% { transform: translate(-10%, -10%) scale(1.05); }
			}

			.flex-center { display: flex; justify-content: center; position: relative; z-index: 1; }

			#sj-frame { border: none; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; background-color: #111; }

			#sj-form { margin-top: 25vh; transition: opacity 0.3s ease, visibility 0.3s ease; }
			#sj-form.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

			.search-container { display: flex; align-items: center; gap: 12px; }

			.custom-dropdown { position: relative; min-width: 160px; }

			.dropdown-selected {
				background: rgba(30, 30, 46, 0.6);
				backdrop-filter: blur(10px);
				padding: 0 16px; padding-right: 40px; height: 56px;
				border: 2px solid rgba(99, 102, 241, 0.3);
				color: #fff; border-radius: 50px; outline: none; font-size: 16px;
				display: flex; align-items: center; justify-content: space-between; cursor: pointer;
				transition: all 0.25s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.25);
			}

			.dropdown-selected::after {
				content: '';
				width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 6px solid #fff;
				position: absolute; right: 16px; transition: transform 0.2s ease;
			}

			.dropdown-selected.active::after { transform: rotate(180deg); }
			.dropdown-selected:hover { border-color: rgba(99,102,241,0.5); transform: translateY(-2px); }

			.dropdown-menu {
				position: absolute; top: calc(100% + 8px); left: 0; right: 0;
				background: rgba(30,30,46,0.95); backdrop-filter: blur(16px);
				border: 2px solid rgba(99,102,241,0.3); border-radius: 12px; overflow: hidden;
				opacity: 0; visibility: hidden; transform: translateY(-10px);
				transition: all 0.25s ease; box-shadow: 0 8px 30px rgba(0,0,0,0.45); z-index: 100;
			}

			.dropdown-menu.active { opacity: 1; visibility: visible; transform: translateY(0); }

			.dropdown-option { padding: 12px 16px; color: rgba(255,255,255,0.9); cursor: pointer; font-size: 15px; border-bottom: 1px solid rgba(99,102,241,0.06); }
			.dropdown-option:last-child { border-bottom: none; }
			.dropdown-option:hover { background: rgba(99,102,241,0.12); color: #fff; }
			.dropdown-option.selected { background: rgba(99,102,241,0.2); color: #fff; }

			#sj-address {
				background: rgba(30,30,46,0.6); backdrop-filter: blur(10px); padding: 0 24px; height: 56px;
				border: 2px solid rgba(99,102,241,0.3); color: #fff; border-radius: 50px; outline: none; width: 500px;
				margin-top: 5px; font-size: 16px; transition: all 0.25s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.25);
			}

			#sj-address::placeholder { color: rgba(255,255,255,0.4); }
			#sj-address:hover { border-color: rgba(99,102,241,0.5); }
			#sj-address:focus { border: 2px solid #6366f1; background: rgba(30,30,46,0.8); box-shadow: 0 8px 40px rgba(99,102,241,0.2); transform: translateY(-2px); }

			@media (max-width: 768px) {
				#sj-address { width: 200px; font-size: 14px; padding: 0 16px; }
				.custom-dropdown { min-width: 120px; }
				.dropdown-selected { font-size: 14px; padding: 0 12px; padding-right: 36px; }
				.search-container { flex-wrap: wrap; justify-content: center; }
			}
		</style>
	</head>
	<body>
		<form id="sj-form" class="flex-center">
			<input
				id="sj-search-engine"
				value="https://www.duckduckgo.com/?q=%s"
				type="hidden"
			/>
			<div class="search-container">
				<div class="custom-dropdown">
					<div class="dropdown-selected">DuckDuckGo</div>
					<div class="dropdown-menu">
						<div class="dropdown-option selected" data-value="https://www.duckduckgo.com/?q=%s">DuckDuckGo</div>
						<div class="dropdown-option" data-value="https://www.google.com/search?q=%s">Google</div>
						<div class="dropdown-option" data-value="https://www.bing.com/search?q=%s">Bing</div>
						<div class="dropdown-option" data-value="https://search.yahoo.com/search?p=%s">Yahoo</div>
					</div>
				</div>
				<input id="sj-address" type="text" placeholder="Search the web freely" />
			</div>
		</form>
		
		<script>
			const dropdownSelected = document.querySelector('.dropdown-selected');
			const dropdownMenu = document.querySelector('.dropdown-menu');
			const dropdownOptions = document.querySelectorAll('.dropdown-option');
			const searchEngineInput = document.getElementById('sj-search-engine');
			const sjForm = document.getElementById('sj-form');
			
			// Monitor for iframe creation and visibility
			function checkForIframe() {
				const sjFrame = document.getElementById('sj-frame');
				if (sjFrame && sjFrame.style.display !== 'none') {
					sjForm.classList.add('hidden');
					return true;
				}
				return false;
			}
			
			// Check periodically for iframe
			const iframeChecker = setInterval(() => {
				if (checkForIframe()) {
					clearInterval(iframeChecker);
				}
			}, 100);
			
			// Also listen for form submission
			sjForm.addEventListener('submit', () => {
				setTimeout(() => {
					checkForIframe();
				}, 500);
			});
			
			// Monitor DOM changes for iframe creation
			const bodyObserver = new MutationObserver(() => {
				if (checkForIframe()) {
					bodyObserver.disconnect();
				}
			});
			
			bodyObserver.observe(document.body, { 
				childList: true, 
				subtree: true,
				attributes: true,
				attributeFilter: ['style']
			});
			
			// Toggle dropdown
			dropdownSelected.addEventListener('click', (e) => {
				e.stopPropagation();
				dropdownSelected.classList.toggle('active');
				dropdownMenu.classList.toggle('active');
			});
			
			// Select option
			dropdownOptions.forEach(option => {
				option.addEventListener('click', (e) => {
					e.stopPropagation();
					
					// Update selected text
					dropdownSelected.textContent = option.textContent;
					
					// Update hidden input
					searchEngineInput.value = option.dataset.value;
					
					// Update selected class
					dropdownOptions.forEach(opt => opt.classList.remove('selected'));
					option.classList.add('selected');
					
					// Close dropdown
					dropdownSelected.classList.remove('active');
					dropdownMenu.classList.remove('active');
				});
			});
			
			// Close dropdown when clicking outside
			document.addEventListener('click', () => {
				dropdownSelected.classList.remove('active');
				dropdownMenu.classList.remove('active');
			});
		</script>
	</body>
</html>